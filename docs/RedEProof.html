
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module RedEProof</title>
<meta name="description" content="Documentation of Coq module RedEProof" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
</head>

<body>
<h1 class="title">Module RedEProof</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Arith.html">Arith</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Freevar.html">Freevar</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Misc.html">Misc</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.micromega.Psatz.html">Psatz</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Star.html">Star</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Eqdep_dec.html">Coq.Logic.Eqdep_dec</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FEnv.html">FEnv</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="STerm.html">STerm</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Red.html">Red</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="RedE.html">RedE</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Pretty.html">Pretty</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="kwd">Inductive</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="index">index</a></span> <span class="id">l</span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; 0<br/>
&nbsp;&nbsp;| <span class="id">y</span> :: <span class="id">l</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="Freevar.html#freevar_eq_dec">freevar_eq_dec</a></span> <span class="id">x</span> <span class="id">y</span> <span class="kwd">then</span> 0 <span class="kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id">index</span> <span class="id">l</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="read_clo">read_clo</a></span> (<span class="id">xs</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Freevar.html#freevar">freevar</a></span>) (<span class="id">c</span> : <span class="id"><a href="RedE.html#clo">clo</a></span>) : <span class="id"><a href="STerm.html#term">term</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">c</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#clo_var">clo_var</a></span> <span class="id">x</span> =&gt; <span class="id"><a href="STerm.html#var">var</a></span> (<span class="id"><a href="RedEProof.html#index">index</a></span> <span class="id">xs</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#clo_term">clo_term</a></span> <span class="id">_</span> <span class="id">t</span> <span class="id">l</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">nl</span> := <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id">read_clo</span> <span class="id">xs</span>) <span class="id">l</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="STerm.html#subst">subst</a></span> (<span class="id"><a href="STerm.html#read_env">read_env</a></span> <span class="id">nl</span>) <span class="id">t</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="read_shift_clo">read_shift_clo</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">x</span> <span class="id">xs</span>, <span class="id">x</span> \<span class="id">notin</span> <span class="id"><a href="RedE.html#clo_fv">clo_fv</a></span> <span class="id">c</span> -&gt; <span class="id"><a href="RedE.html#clo_closed">clo_closed</a></span> <span class="id">c</span> -&gt; <span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> (<span class="id">x</span> :: <span class="id">xs</span>) <span class="id">c</span> = <span class="id"><a href="STerm.html#ren_term">ren_term</a></span> (<span class="id"><a href="STerm.html#plus_ren">plus_ren</a></span> 1) (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">xs</span> <span class="id">c</span>).<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">c</span> <span class="kwd">using</span> <span class="id"><a href="RedE.html#clo_ind2">clo_ind2</a></span>; <span class="id">intros</span> <span class="id">y</span> <span class="id">ys</span> <span class="id">Hy</span> <span class="id">Hcc</span>; <span class="id">inversion</span> <span class="id">Hcc</span>; <span class="id">subst</span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id">f_equal</span>. <span class="id">destruct</span> <span class="id"><a href="Freevar.html#freevar_eq_dec">freevar_eq_dec</a></span>; [<span class="id">tauto</span>|]. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="STerm.html#ren_subst">ren_subst</a></span>. <span class="id">eapply</span> <span class="id"><a href="STerm.html#subst_closed_at_ext">subst_closed_at_ext</a></span>; [<span class="id">eassumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">Hn</span>. <span class="id">unfold</span> <span class="id"><a href="STerm.html#comp">comp</a></span>, <span class="id"><a href="STerm.html#read_env">read_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> !<span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="kwd">as</span> [<span class="id">u</span>|] <span class="id">eqn</span>:<span class="id">Hu</span>; [|<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_None">nth_error_None</a></span> <span class="kwd">in</span> <span class="id">Hu</span>; <span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">u</span> \<span class="kwd">in</span> <span class="id">l</span>) <span class="kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>; <span class="id">eassumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id">H</span>; [<span class="id">eassumption</span>| |<span class="id">apply</span> <span class="id">H4</span>; <span class="id">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Misc.html#concat_map_In">concat_map_In</a></span> <span class="kwd">in</span> <span class="id">Hy</span>. <span class="id">intros</span> <span class="id">Hy2</span>; <span class="id">apply</span> <span class="id">Hy</span>; <span class="kwd">exists</span> <span class="id">u</span>; <span class="id">tauto</span>.<br/>
Qed.</details>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="read_nfvalx">read_nfvalx</a></span> <span class="id">xs</span> <span class="id">v</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#nxvar">nxvar</a></span> <span class="id">x</span> =&gt; <span class="id"><a href="Red.html#nvar">nvar</a></span> (<span class="id"><a href="RedEProof.html#index">index</a></span> <span class="id">xs</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#nxapp">nxapp</a></span> <span class="id">v1</span> <span class="id">v2</span> =&gt; <span class="id"><a href="Red.html#napp">napp</a></span> (<span class="id">read_nfvalx</span> <span class="id">xs</span> <span class="id">v1</span>) (<span class="id">read_nfvalx_or_lam</span> <span class="id">xs</span> <span class="id">v2</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#nxswitch">nxswitch</a></span> <span class="id">t</span> <span class="id">m</span> =&gt; <span class="id"><a href="Red.html#nswitch">nswitch</a></span> (<span class="id">read_nfvalx</span> <span class="id">xs</span> <span class="id">t</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>), <span class="id">read_nfvalx_or_lam</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span> ++ <span class="id">xs</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
<br/>
<span class="kwd">with</span> <span class="id"><a name="read_nfvalx_or_lam">read_nfvalx_or_lam</a></span> <span class="id">xs</span> <span class="id">v</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#nxval">nxval</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="Red.html#nval">nval</a></span> (<span class="id">read_nfvalx</span> <span class="id">xs</span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#nxlam">nxlam</a></span> <span class="id">x</span> <span class="id">v</span> =&gt; <span class="id"><a href="Red.html#nlam">nlam</a></span> (<span class="id">read_nfvalx_or_lam</span> (<span class="id">x</span> :: <span class="id">xs</span>) <span class="id">v</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#nxconstr">nxconstr</a></span> <span class="id">tag</span> <span class="id">l</span> =&gt; <span class="id"><a href="Red.html#nconstr">nconstr</a></span> <span class="id">tag</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id">read_nfvalx_or_lam</span> <span class="id">xs</span>) <span class="id">l</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="read_valE">read_valE</a></span> {<span class="id">df</span>} (<span class="id">xs</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Freevar.html#freevar">freevar</a></span>) (<span class="id">v</span> : <span class="id"><a href="RedE.html#valE">valE</a></span> <span class="id">df</span>) : <span class="id"><a href="Red.html#val">val</a></span> <span class="id">df</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#valE_nf">valE_nf</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="Red.html#val_nf">val_nf</a></span> (<span class="id"><a href="RedEProof.html#read_nfvalx">read_nfvalx</a></span> <span class="id">xs</span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#valEs_abs">valEs_abs</a></span> <span class="id">t</span> <span class="id">l</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Red.html#vals_abs">vals_abs</a></span> (<span class="id"><a href="STerm.html#subst">subst</a></span> (<span class="id"><a href="STerm.html#scons">scons</a></span> (<span class="id"><a href="STerm.html#var">var</a></span> 0) (<span class="id"><a href="STerm.html#read_env">read_env</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">c</span> =&gt; <span class="id"><a href="STerm.html#ren_term">ren_term</a></span> (<span class="id"><a href="STerm.html#plus_ren">plus_ren</a></span> 1) (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">xs</span> <span class="id">c</span>)) <span class="id">l</span>))) <span class="id">t</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#valEd_abs">valEd_abs</a></span> <span class="id">t</span> <span class="id">l</span> <span class="id">v</span> =&gt; <span class="id"><a href="Red.html#vald_nf">vald_nf</a></span> (<span class="id"><a href="RedEProof.html#read_nfvalx_or_lam">read_nfvalx_or_lam</a></span> <span class="id">xs</span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#valEs_constr">valEs_constr</a></span> <span class="id">tag</span> <span class="id">l</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Red.html#vals_constr">vals_constr</a></span> <span class="id">tag</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">xs</span>) <span class="id">l</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#valEd_constr">valEd_constr</a></span> <span class="id">tag</span> <span class="id">l</span> <span class="id">v</span> =&gt; <span class="id"><a href="Red.html#vald_nf">vald_nf</a></span> (<span class="id"><a href="RedEProof.html#read_nfvalx_or_lam">read_nfvalx_or_lam</a></span> <span class="id">xs</span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="read_extE">read_extE</a></span> {<span class="id">df</span>} <span class="id">xs</span> (<span class="id">e</span> : <span class="id"><a href="RedE.html#extE">extE</a></span> <span class="id">df</span>) : <span class="id"><a href="Red.html#ext">ext</a></span> <span class="id">df</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#extE_term">extE_term</a></span> <span class="id">env</span> <span class="id">t</span> =&gt; <span class="id"><a href="Red.html#ext_term">ext_term</a></span> (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">xs</span> (<span class="id"><a href="RedE.html#clo_term">clo_term</a></span> <span class="id">xs</span> <span class="id">t</span> <span class="id">env</span>))<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#extE_clo">extE_clo</a></span> <span class="id">c</span> =&gt; <span class="id"><a href="Red.html#ext_term">ext_term</a></span> (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">xs</span> <span class="id">c</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#extE_app">extE_app</a></span> <span class="id">env</span> <span class="id">o1</span> <span class="id">t2</span> =&gt; <span class="id"><a href="Red.html#ext_app">ext_app</a></span> (<span class="id"><a href="Pretty.html#out_map">out_map</a></span> (<span class="id"><a href="RedEProof.html#read_valE">read_valE</a></span> <span class="id">xs</span>) <span class="id">o1</span>) (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">xs</span> (<span class="id"><a href="RedE.html#clo_term">clo_term</a></span> <span class="id">xs</span> <span class="id">t2</span> <span class="id">env</span>))<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#extE_appnf">extE_appnf</a></span> <span class="id">env</span> <span class="id">v1</span> <span class="id">o2</span> =&gt; <span class="id"><a href="Red.html#ext_appnf">ext_appnf</a></span> (<span class="id"><a href="RedEProof.html#read_nfvalx">read_nfvalx</a></span> <span class="id">xs</span> <span class="id">v1</span>) (<span class="id"><a href="Pretty.html#out_map">out_map</a></span> (<span class="id"><a href="RedEProof.html#read_valE">read_valE</a></span> <span class="id">xs</span>) <span class="id">o2</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#extE_switch">extE_switch</a></span> <span class="id">env</span> <span class="id">o</span> <span class="id">m</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Red.html#ext_switch">ext_switch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Pretty.html#out_map">out_map</a></span> (<span class="id"><a href="RedEProof.html#read_valE">read_valE</a></span> <span class="id">xs</span>) <span class="id">o</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>, <span class="id"><a href="STerm.html#subst">subst</a></span> (<span class="id"><a href="STerm.html#liftn_subst">liftn_subst</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>) (<span class="id"><a href="STerm.html#read_env">read_env</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">xs</span>) <span class="id">env</span>))) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#extE_switchnf1">extE_switchnf1</a></span> <span class="id">env</span> <span class="id">v</span> <span class="id">m1</span> <span class="id">m2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Red.html#ext_switchnf">ext_switchnf</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="RedEProof.html#read_nfvalx">read_nfvalx</a></span> <span class="id">xs</span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>), <span class="id"><a href="RedEProof.html#read_nfvalx_or_lam">read_nfvalx_or_lam</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span> ++ <span class="id">xs</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>, <span class="id"><a href="STerm.html#subst">subst</a></span> (<span class="id"><a href="STerm.html#liftn_subst">liftn_subst</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>) (<span class="id"><a href="STerm.html#read_env">read_env</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">xs</span>) <span class="id">env</span>))) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m2</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#extE_switchnf2">extE_switchnf2</a></span> <span class="id">env</span> <span class="id">v</span> <span class="id">m1</span> <span class="id">xs2</span> <span class="id">o</span> <span class="id">m2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Red.html#ext_switchnf">ext_switchnf</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="RedEProof.html#read_nfvalx">read_nfvalx</a></span> <span class="id">xs</span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>), <span class="id"><a href="RedEProof.html#read_nfvalx_or_lam">read_nfvalx_or_lam</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span> ++ <span class="id">xs</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">xs2</span>, <span class="id"><a href="Pretty.html#out_map">out_map</a></span> (<span class="id"><a href="RedEProof.html#read_valE">read_valE</a></span> (<span class="id">xs2</span> ++ <span class="id">xs</span>)) <span class="id">o</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>, <span class="id"><a href="STerm.html#subst">subst</a></span> (<span class="id"><a href="STerm.html#liftn_subst">liftn_subst</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>) (<span class="id"><a href="STerm.html#read_env">read_env</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">xs</span>) <span class="id">env</span>))) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m2</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#extEd_abs">extEd_abs</a></span> <span class="id">env</span> <span class="id">x</span> <span class="id">t</span> <span class="id">o</span> =&gt; <span class="id"><a href="Red.html#extd_abs">extd_abs</a></span> (<span class="id"><a href="Pretty.html#out_map">out_map</a></span> (<span class="id"><a href="RedEProof.html#read_valE">read_valE</a></span> (<span class="id">x</span> :: <span class="id">xs</span>)) <span class="id">o</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#extEd_constr1">extEd_constr1</a></span> <span class="id">tag</span> <span class="id">l</span> <span class="id">l1</span> <span class="id">l2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Red.html#extd_constr">extd_constr</a></span> <span class="id">tag</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="RedEProof.html#read_nfvalx_or_lam">read_nfvalx_or_lam</a></span> <span class="id">xs</span>) <span class="id">l1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">xs</span>) <span class="id">l2</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="RedE.html#extEd_constr2">extEd_constr2</a></span> <span class="id">tag</span> <span class="id">l</span> <span class="id">l1</span> <span class="id">o</span> <span class="id">l2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Red.html#extd_constr">extd_constr</a></span> <span class="id">tag</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="RedEProof.html#read_nfvalx_or_lam">read_nfvalx_or_lam</a></span> <span class="id">xs</span>) <span class="id">l1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Pretty.html#out_map">out_map</a></span> (<span class="id"><a href="RedEProof.html#read_valE">read_valE</a></span> <span class="id">xs</span>) <span class="id">o</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">xs</span>) <span class="id">l2</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="read_valE_deep">read_valE_deep</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">v</span> : <span class="id"><a href="RedE.html#valE">valE</a></span> <span class="id"><a href="Misc.html#deep">deep</a></span>) <span class="id">xs</span>, <span class="id"><a href="RedEProof.html#read_valE">read_valE</a></span> <span class="id">xs</span> <span class="id">v</span> = <span class="id"><a href="Red.html#vald_nf">vald_nf</a></span> (<span class="id"><a href="RedEProof.html#read_nfvalx_or_lam">read_nfvalx_or_lam</a></span> <span class="id">xs</span> (<span class="id"><a href="RedE.html#getvalEd_nf">getvalEd_nf</a></span> <span class="id">v</span>)).<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">v</span> <span class="id">xs</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="RedE.html#destruct_valE_deep">destruct_valE_deep</a></span> <span class="id">v</span>) <span class="kwd">as</span> [[(<span class="id">v2</span> &amp; -&gt;) | (<span class="id">t</span> &amp; <span class="id">env</span> &amp; <span class="id">v2</span> &amp; -&gt;)] | (<span class="id">tag</span> &amp; <span class="id">l</span> &amp; <span class="id">v2</span> &amp; -&gt;)]; <span class="id">reflexivity</span>.<br/>
Qed.</details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="index_app">index_app</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">x</span>, <span class="id">x</span> \<span class="kwd">in</span> <span class="id">L1</span> -&gt; <span class="id"><a href="RedEProof.html#index">index</a></span> (<span class="id">L1</span> ++ <span class="id">L2</span>) <span class="id">x</span> = <span class="id"><a href="RedEProof.html#index">index</a></span> <span class="id">L1</span> <span class="id">x</span>.<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">x</span> <span class="id">H</span>. <span class="id">induction</span> <span class="id">L1</span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id"><a href="Freevar.html#freevar_eq_dec">freevar_eq_dec</a></span>; [<span class="id">reflexivity</span>|]. <span class="id">f_equal</span>. <span class="id">apply</span> <span class="id">IHL1</span>. <span class="id">destruct</span> <span class="id">H</span>; [<span class="id">congruence</span>|<span class="id">tauto</span>].<br/>
Qed.</details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="index_app2">index_app2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">x</span>, <span class="id">x</span> \<span class="id">notin</span> <span class="id">L1</span> -&gt; <span class="id"><a href="RedEProof.html#index">index</a></span> (<span class="id">L1</span> ++ <span class="id">L2</span>) <span class="id">x</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">L1</span> + <span class="id"><a href="RedEProof.html#index">index</a></span> <span class="id">L2</span> <span class="id">x</span>.<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">x</span> <span class="id">H</span>. <span class="id">induction</span> <span class="id">L1</span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id"><a href="Freevar.html#freevar_eq_dec">freevar_eq_dec</a></span>; <span class="id">subst</span>; [<span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">tauto</span>|]. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHL1</span>. <span class="id">tauto</span>.<br/>
Qed.</details>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nth_error_index">nth_error_index</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L</span> <span class="id">p</span> <span class="id">xs</span> <span class="id">n</span> <span class="id">x</span>, <span class="id"><a href="Freevar.html#distinct">distinct</a></span> <span class="id">L</span> <span class="id">p</span> <span class="id">xs</span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id">xs</span> <span class="id">n</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span> -&gt; <span class="id"><a href="RedEProof.html#index">index</a></span> <span class="id">xs</span> <span class="id">x</span> = <span class="id">n</span>.<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">L</span> <span class="id">p</span> <span class="id">xs</span> <span class="id">n</span> <span class="id">x</span> <span class="id">H</span>; <span class="id">revert</span> <span class="id">n</span> <span class="id">x</span>; <span class="id">induction</span> <span class="id">H</span>; <span class="id">intros</span> [|<span class="id">k</span>] <span class="id">y</span> <span class="id">Hy</span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id"><a href="Freevar.html#freevar_eq_dec">freevar_eq_dec</a></span>; [<span class="id">reflexivity</span>|]. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id"><a href="Freevar.html#freevar_eq_dec">freevar_eq_dec</a></span>; [|<span class="id">f_equal</span>; <span class="id">apply</span> <span class="id">IHdistinct</span>; <span class="id">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span>. <span class="id">exfalso</span>. <span class="id">eapply</span> <span class="id"><a href="Freevar.html#distinct_distinct">distinct_distinct</a></span>; [<span class="id">eassumption</span>|<span class="id">left</span>; <span class="id">reflexivity</span>|<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>; <span class="id">eassumption</span>].<br/>
Qed.</details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="read_shiftn_clo">read_shiftn_clo</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">ys</span> <span class="id">p</span> <span class="id">xs</span>, <span class="id"><a href="Freevar.html#distinct">distinct</a></span> (<span class="id"><a href="RedE.html#clo_fv">clo_fv</a></span> <span class="id">c</span>) <span class="id">p</span> <span class="id">ys</span> -&gt; <span class="id"><a href="RedE.html#clo_closed">clo_closed</a></span> <span class="id">c</span> -&gt; <span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> (<span class="id">ys</span> ++ <span class="id">xs</span>) <span class="id">c</span> = <span class="id"><a href="STerm.html#ren_term">ren_term</a></span> (<span class="id"><a href="STerm.html#plus_ren">plus_ren</a></span> <span class="id">p</span>) (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">xs</span> <span class="id">c</span>).<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">c</span> <span class="kwd">using</span> <span class="id"><a href="RedE.html#clo_ind2">clo_ind2</a></span>; <span class="id">intros</span> <span class="id">ys</span> <span class="id">p</span> <span class="id">zs</span> <span class="id">Hdistinct</span> <span class="id">Hcc</span>; <span class="id">inversion</span> <span class="id">Hcc</span>; <span class="id">subst</span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id">f_equal</span>. <span class="id">erewrite</span> <span class="id"><a href="RedEProof.html#index_app2">index_app2</a></span>, <span class="id"><a href="STerm.html#plus_ren_correct">plus_ren_correct</a></span>, <span class="id"><a href="Freevar.html#distinct_length">distinct_length</a></span>; [<span class="id">reflexivity</span>|<span class="id">eassumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H</span>. <span class="id">eapply</span> <span class="id"><a href="Freevar.html#distinct_distinct">distinct_distinct</a></span>; <span class="id">try</span> <span class="id">eassumption</span>. <span class="id">simpl</span>. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="STerm.html#ren_subst">ren_subst</a></span>. <span class="id">eapply</span> <span class="id"><a href="STerm.html#subst_closed_at_ext">subst_closed_at_ext</a></span>; [<span class="id">eassumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">Hn</span>. <span class="id">unfold</span> <span class="id"><a href="STerm.html#comp">comp</a></span>, <span class="id"><a href="STerm.html#read_env">read_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> !<span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="kwd">as</span> [<span class="id">u</span>|] <span class="id">eqn</span>:<span class="id">Hu</span>; [|<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_None">nth_error_None</a></span> <span class="kwd">in</span> <span class="id">Hu</span>; <span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">u</span> \<span class="kwd">in</span> <span class="id">l</span>) <span class="kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>; <span class="id">eassumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id">H</span>; [<span class="id">eassumption</span>| |<span class="id">apply</span> <span class="id">H4</span>; <span class="id">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Freevar.html#distinct_incl">distinct_incl</a></span>; [|<span class="id">eassumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">y</span> <span class="id">Hy</span>. <span class="id">rewrite</span> <span class="id"><a href="Misc.html#concat_map_In">concat_map_In</a></span>. <span class="kwd">exists</span> <span class="id">u</span>. <span class="id">tauto</span>.<br/>
Qed.</details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="redE_red">redE_red</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">df</span> <span class="id">xs</span> <span class="id">dom</span> <span class="id">fvs</span> <span class="id">e</span> <span class="id">o</span>, <span class="id"><a href="RedE.html#redE">redE</a></span> <span class="id">df</span> <span class="id">xs</span> <span class="id">dom</span> <span class="id">fvs</span> <span class="id">e</span> <span class="id">o</span> -&gt; <span class="id">fvs</span> \<span class="id">subseteq</span> <span class="id">xs</span> /\ <span class="id"><a href="RedE.html#extE_closed_at">extE_closed_at</a></span> <span class="id">e</span> <span class="id">fvs</span> -&gt; <span class="kwd">forall</span> <span class="id">fvs2</span>, <span class="id">fvs</span> \<span class="id">subseteq</span> <span class="id">fvs2</span> -&gt; <span class="id"><a href="Red.html#red">red</a></span> <span class="id">df</span> (<span class="id"><a href="RedEProof.html#read_extE">read_extE</a></span> <span class="id">fvs2</span> <span class="id">e</span>) (<span class="id"><a href="Pretty.html#out_map">out_map</a></span> (<span class="id"><a href="RedEProof.html#read_valE">read_valE</a></span> <span class="id">fvs2</span>) <span class="id">o</span>).<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">refine</span> (<span class="id"><a href="Inductive.html#preserved_with_inv6_rec">preserved_with_inv6_rec</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="RedE.html#redE_is_ind6">redE_is_ind6</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="RedE.html#closed_preserved_down">closed_preserved_down</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">df</span> <span class="id">xs</span> <span class="id">dom</span> <span class="id">fvs</span> <span class="id">e</span> <span class="id">o</span> <span class="id">H</span> [<span class="id">Hfvs</span> <span class="id">He</span>] <span class="id">fvs2</span> <span class="id">Hfvs2</span>. <span class="id">inversion</span> <span class="id">H</span>; <span class="id">unexistT</span>; <span class="id">subst</span>; <span class="id">unexistT</span>; <span class="id">subst</span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">Hfvs2</span>. <span class="id">apply</span> <span class="id"><a href="Freevar.html#list_inter_subl2">list_inter_subl2</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">unfold</span> <span class="id"><a href="STerm.html#read_env">read_env</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>, <span class="id">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H7</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">He</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H6</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="STerm.html#subst_closed_at_ext">subst_closed_at_ext</a></span>; [<span class="id">constructor</span>; <span class="id">constructor</span>|<span class="id">eassumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> [|<span class="id">n</span>] <span class="id">Hn</span>; [<span class="id">reflexivity</span>|]. <span class="id">simpl</span>; <span class="id">unfold</span> <span class="id"><a href="STerm.html#read_env">read_env</a></span>, <span class="id"><a href="STerm.html#comp">comp</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> !<span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>; <span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="kwd">as</span> [<span class="id">u</span>|] <span class="id">eqn</span>:<span class="id">Hu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_None">nth_error_None</a></span> <span class="kwd">in</span> <span class="id">Hu</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">He</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H7</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">econstructor</span>; [|<span class="id">apply</span> <span class="id">H11</span>; <span class="id">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="STerm.html#subst_closed_at_ext">subst_closed_at_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id">H10</span>. <span class="id">rewrite</span> <span class="id">Hfvs2</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> [|<span class="id">n</span>] <span class="id">Hn</span>; <span class="id">simpl</span>; <span class="id">unfold</span> <span class="id"><a href="STerm.html#comp">comp</a></span>, <span class="id"><a href="STerm.html#read_env">read_env</a></span>; <span class="id">simpl</span>; [<span class="id">destruct</span> <span class="id"><a href="Freevar.html#freevar_eq_dec">freevar_eq_dec</a></span>; <span class="id">congruence</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> !<span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>; <span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="kwd">as</span> [<span class="id">u</span>|] <span class="id">eqn</span>:<span class="id">Hu</span>; [|<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_None">nth_error_None</a></span> <span class="kwd">in</span> <span class="id">Hu</span>; <span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>, <span class="id">H5</span> <span class="kwd">in</span> <span class="id">Hu</span>. <span class="id">destruct</span> <span class="id">Hu</span> <span class="kwd">as</span> [<span class="id">Hu1</span> <span class="id">Hu2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="RedEProof.html#read_shift_clo">read_shift_clo</a></span>; [<span class="id">reflexivity</span>| |<span class="id">apply</span> <span class="id">Hu1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Hu2</span>, <span class="id">Hfvs</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="RedEProof.html#read_valE_deep">read_valE_deep</a></span>. <span class="id">constructor</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>; <span class="id">econstructor</span>; [<span class="id">eapply</span> <span class="id">H6</span>|<span class="id">eapply</span> <span class="id">H7</span>]; <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>; <span class="id">econstructor</span>; [<span class="id">eapply</span> <span class="id">H6</span>|<span class="id">eapply</span> <span class="id">H7</span>]; <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">He</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H10</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="STerm.html#subst1">subst1</a></span>. <span class="id">rewrite</span> <span class="id"><a href="STerm.html#subst_subst">subst_subst</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="STerm.html#subst_closed_at_ext">subst_closed_at_ext</a></span>; [<span class="id">eapply</span> <span class="id">H8</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">unfold</span> <span class="id"><a href="STerm.html#comp">comp</a></span>, <span class="id"><a href="STerm.html#read_env">read_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> [|<span class="id">n</span>] <span class="id">Hn</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">destruct</span> <span class="id">t2</span>; <span class="id">try</span> <span class="id">reflexivity</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>. <span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id">eqn</span>:<span class="id">Hu</span>; [|<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_None">nth_error_None</a></span> <span class="kwd">in</span> <span class="id">Hu</span>; <span class="id">inversion</span> <span class="id">H9</span>; <span class="id">subst</span>; <span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> !<span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>; <span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="kwd">as</span> [<span class="id">u</span>|] <span class="id">eqn</span>:<span class="id">Hu</span>; [|<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_None">nth_error_None</a></span> <span class="kwd">in</span> <span class="id">Hu</span>; <span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="STerm.html#subst_ren">subst_ren</a></span>; <span class="id">unfold</span> <span class="id"><a href="STerm.html#comp">comp</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="STerm.html#subst_ext">subst_ext</a></span>; [<span class="id">apply</span> <span class="id"><a href="STerm.html#subst_id">subst_id</a></span>|]; <span class="id">intros</span>; <span class="id">f_equal</span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="RedEProof.html#read_valE_deep">read_valE_deep</a></span>. <span class="id">constructor</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">fvs2</span>) <span class="id">lc</span>) <span class="kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="STerm.html#subst">subst</a></span> (<span class="id"><a href="STerm.html#read_env">read_env</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">fvs2</span>) <span class="id">env</span>))) <span class="id">l</span>); [<span class="id">constructor</span>; <span class="id">constructor</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Misc.html#Forall2_map_eq">Forall2_map_eq</a></span>, <span class="id"><a href="Misc.html#Forall2_impl">Forall2_impl</a></span>; [|<span class="id">eassumption</span>]. <span class="id">intros</span> <span class="id">t</span> <span class="id">c</span> <span class="id">Htc</span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="STerm.html#env_get_maybe_var">env_get_maybe_var</a></span> <span class="kwd">as</span> [<span class="id">c1</span>|] <span class="id">eqn</span>:<span class="id">Hc1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">subst</span>. <span class="id">destruct</span> <span class="id">t</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="STerm.html#read_env">read_env</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>, <span class="id">Hc1</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> <span class="id">Htc</span> <span class="kwd">as</span> (<span class="id">xs2</span> &amp; <span class="id">Hxs2a</span> &amp; <span class="id">Hxs2b</span> &amp; -&gt;). <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="STerm.html#subst">subst</a></span> (<span class="id"><a href="STerm.html#read_env">read_env</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">fvs2</span>) <span class="id">env</span>))) <span class="id">l</span>) <span class="kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="RedEProof.html#read_clo">read_clo</a></span> <span class="id">fvs2</span>) <span class="id">lc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id">H9</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">symmetry</span>. <span class="id">eapply</span> <span class="id"><a href="Misc.html#Forall2_map_eq">Forall2_map_eq</a></span>, <span class="id"><a href="Misc.html#Forall2_impl">Forall2_impl</a></span>; [|<span class="id">eassumption</span>]. <span class="id">intros</span> <span class="id">t</span> <span class="id">c</span> <span class="id">Htc</span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="STerm.html#env_get_maybe_var">env_get_maybe_var</a></span> <span class="kwd">as</span> [<span class="id">c1</span>|] <span class="id">eqn</span>:<span class="id">Hc1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">subst</span>. <span class="id">destruct</span> <span class="id">t</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="STerm.html#read_env">read_env</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>, <span class="id">Hc1</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">destruct</span> <span class="id">Htc</span> <span class="kwd">as</span> (<span class="id">xs2</span> &amp; <span class="id">Hxs2a</span> &amp; <span class="id">Hxs2b</span> &amp; -&gt;). <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>; <span class="id">econstructor</span>; [<span class="id">apply</span> <span class="id">H7</span>; <span class="id">assumption</span>|<span class="id">apply</span> <span class="id">H9</span>; <span class="id">assumption</span>].<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="RedEProof.html#read_valE_deep">read_valE_deep</a></span>. <span class="id">constructor</span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="RedEProof.html#read_nfvalx_or_lam">read_nfvalx_or_lam</a></span> <span class="id">fvs2</span>) (<span class="id">l</span>' := <span class="id"><a href="RedE.html#getvalEd_nf">getvalEd_nf</a></span> <span class="id">v</span> :: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H5</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">H6</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">H7</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">He</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="id">econstructor</span>; [<span class="id">rewrite</span> <span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>, <span class="id">H6</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>; <span class="id">simpl</span>; <span class="id">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="STerm.html#subst_subst">subst_subst</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="STerm.html#subst_closed_at_ext">subst_closed_at_ext</a></span>; [<span class="id">apply</span> <span class="id">H7</span>; <span class="id">assumption</span>|<span class="id">eapply</span> <span class="id">H8</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>; <span class="id">eassumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">Hn</span>. <span class="id">unfold</span> <span class="id"><a href="STerm.html#comp">comp</a></span>, <span class="id"><a href="STerm.html#liftn_subst">liftn_subst</a></span>, <span class="id"><a href="STerm.html#read_env">read_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Compare_dec.html#le_lt_dec">le_lt_dec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> !<span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_app2">nth_error_app2</a></span> <span class="kwd">by</span> <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id">env</span> <span class="id">_</span>) <span class="kwd">as</span> [<span class="id">c</span>|] <span class="id">eqn</span>:<span class="id">Hc</span>; [|<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_None">nth_error_None</a></span> <span class="kwd">in</span> <span class="id">Hc</span>; <span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="STerm.html#subst_ren">subst_ren</a></span>. <span class="id">erewrite</span> <span class="id"><a href="STerm.html#subst_ext">subst_ext</a></span>; [<span class="id">apply</span> <span class="id"><a href="STerm.html#subst_id">subst_id</a></span>|]. <span class="id">intros</span> <span class="id">n2</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="STerm.html#comp">comp</a></span>; <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>, <span class="id"><a href="STerm.html#plus_ren_correct">plus_ren_correct</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">l</span> + <span class="id">n2</span>)) <span class="kwd">with</span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="RedE.html#clo">clo</a></span>) <span class="kwd">by</span> (<span class="id">symmetry</span>; <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_None">nth_error_None</a></span>; <span class="id">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">simpl</span>. <span class="id">rewrite</span> !<span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_app1">nth_error_app1</a></span> <span class="kwd">by</span> <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id">l</span> <span class="id">_</span>) <span class="kwd">as</span> [<span class="id">c</span>|] <span class="id">eqn</span>:<span class="id">Hc</span>; [|<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_None">nth_error_None</a></span> <span class="kwd">in</span> <span class="id">Hc</span>; <span class="id">lia</span>]. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="id">apply</span> <span class="id">H6</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">He</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> <span class="id"><a href="STerm.html#subst_closed_at_ext">subst_closed_at_ext</a></span>; [<span class="id">apply</span> <span class="id">H8</span>; <span class="id">rewrite</span> <span class="id">Hfvs2</span>; <span class="id">reflexivity</span>|<span class="id">apply</span> <span class="id">H13</span>; <span class="id">left</span>; <span class="id">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> <span class="id">Hn</span>. <span class="id">unfold</span> <span class="id"><a href="STerm.html#liftn_subst">liftn_subst</a></span>, <span class="id"><a href="STerm.html#read_env">read_env</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Compare_dec.html#le_lt_dec">le_lt_dec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> !<span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_app2">nth_error_app2</a></span> <span class="kwd">by</span> (<span class="id">erewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="Freevar.html#distinct_length">distinct_length</a></span>; <span class="id">eassumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> !<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="Freevar.html#distinct_length">distinct_length</a></span> <span class="kwd">by</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="id">eqn</span>:<span class="id">Hu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">erewrite</span> <span class="id"><a href="RedEProof.html#read_shiftn_clo">read_shiftn_clo</a></span>; [<span class="id">reflexivity</span>| |<span class="id">eapply</span> <span class="id">H7</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>; <span class="id">eassumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Freevar.html#distinct_incl">distinct_incl</a></span>; [|<span class="id">eassumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">Hfvs</span>. <span class="id">eapply</span> <span class="id">H7</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_None">nth_error_None</a></span> <span class="kwd">in</span> <span class="id">Hu</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> <span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_app1">nth_error_app1</a></span>, <span class="id"><a href="Misc.html#nth_error_map">nth_error_map</a></span> <span class="kwd">by</span> (<span class="id">erewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span>, <span class="id"><a href="Freevar.html#distinct_length">distinct_length</a></span>; <span class="id">eassumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error">nth_error</a></span> <span class="kwd">as</span> [<span class="id">y</span>|] <span class="id">eqn</span>:<span class="id">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">simpl</span>. <span class="id">f_equal</span>. <span class="id">rewrite</span> <span class="id"><a href="RedEProof.html#index_app">index_app</a></span>; [|<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_In">nth_error_In</a></span>; <span class="id">eassumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symmetry</span>; <span class="id">eapply</span> <span class="id"><a href="RedEProof.html#nth_error_index">nth_error_index</a></span>; <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#nth_error_None">nth_error_None</a></span> <span class="kwd">in</span> <span class="id">Hy</span>. <span class="id">erewrite</span> <span class="id"><a href="Freevar.html#distinct_length">distinct_length</a></span> <span class="kwd">in</span> <span class="id">Hy</span> <span class="kwd">by</span> <span class="id">eassumption</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">replace</span> <span class="id">p</span> <span class="kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">ys</span>) <span class="kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="Freevar.html#distinct_length">distinct_length</a></span>; <span class="id">eassumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H9</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="RedEProof.html#read_valE_deep">read_valE_deep</a></span>. <span class="id">constructor</span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>), <span class="id"><a href="RedEProof.html#read_nfvalx_or_lam">read_nfvalx_or_lam</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span> ++ <span class="id">fvs2</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) (<span class="id">l</span>' := (<span class="id">ys</span>, <span class="id"><a href="RedE.html#getvalEd_nf">getvalEd_nf</a></span> <span class="id">v2</span>) :: <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H6</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">congruence</span>; <span class="id">try</span> (<span class="id">destruct</span> <span class="id">o0</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">autoinjSome</span>; <span class="id">simpl</span>; <span class="id">congruence</span>).<br/>
Qed.</details>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
