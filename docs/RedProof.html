
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module RedProof</title>
<meta name="description" content="Documentation of Coq module RedProof" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module RedProof</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Arith.html">Arith</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Freevar.html">Freevar</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Misc.html">Misc</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.micromega.Psatz.html">Psatz</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Star.html">Star</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Eqdep_dec.html">Coq.Logic.Eqdep_dec</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FEnv.html">FEnv</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="STerm.html">STerm</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Beta.html">Beta</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Red.html">Red</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Costar.html">Costar</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Pretty.html">Pretty</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="kwd">Inductive</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Rewrite.html">Rewrite</a></span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="read_nfval">read_nfval</a></span> <span class="id">v</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#nvar">nvar</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="STerm.html#var">var</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#napp">napp</a></span> <span class="id">v1</span> <span class="id">v2</span> =&gt; <span class="id"><a href="STerm.html#app">app</a></span> (<span class="id">read_nfval</span> <span class="id">v1</span>) (<span class="id">read_nfval_or_lam</span> <span class="id">v2</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#nswitch">nswitch</a></span> <span class="id">v</span> <span class="id">l</span> =&gt; <span class="id"><a href="STerm.html#switch">switch</a></span> (<span class="id">read_nfval</span> <span class="id">v</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>, <span class="id">read_nfval_or_lam</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">l</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
<br/>
<span class="kwd">with</span> <span class="id"><a name="read_nfval_or_lam">read_nfval_or_lam</a></span> <span class="id">v</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#nval">nval</a></span> <span class="id">v</span> =&gt; <span class="id">read_nfval</span> <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#nlam">nlam</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="STerm.html#abs">abs</a></span> (<span class="id">read_nfval_or_lam</span> <span class="id">v</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#nconstr">nconstr</a></span> <span class="id">tag</span> <span class="id">l</span> =&gt; <span class="id"><a href="STerm.html#constr">constr</a></span> <span class="id">tag</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id">read_nfval_or_lam</span> <span class="id">l</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="read_val">read_val</a></span> {<span class="id">df</span>} (<span class="id">v</span> : <span class="id"><a href="Red.html#val">val</a></span> <span class="id">df</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#vals_nf">vals_nf</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#vals_abs">vals_abs</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="STerm.html#abs">abs</a></span> <span class="id">t</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#vals_constr">vals_constr</a></span> <span class="id">tag</span> <span class="id">l</span> =&gt; <span class="id"><a href="STerm.html#constr">constr</a></span> <span class="id">tag</span> <span class="id">l</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#vald_nf">vald_nf</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> <span class="id">v</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="read_val_nf">read_val_nf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">df</span> <span class="id">v</span>, <span class="id"><a href="RedProof.html#read_val">read_val</a></span> (@<span class="id"><a href="Red.html#val_nf">val_nf</a></span> <span class="id">df</span> <span class="id">v</span>) = <span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span>.<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">intros</span> [|] <span class="id">v</span>; <span class="id">simpl</span>; <span class="id">reflexivity</span>.<br/>
Qed.</details>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="read_out">read_out</a></span> {<span class="id">df</span>} (<span class="id">o</span> : <span class="id"><a href="Pretty.html#out">out</a></span> (<span class="id"><a href="Red.html#val">val</a></span> <span class="id">df</span>)) := <span class="kwd">match</span> <span class="id">o</span> <span class="kwd">with</span> <span class="id"><a href="Pretty.html#out_div">out_div</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> | <span class="id"><a href="Pretty.html#out_ret">out_ret</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="RedProof.html#read_val">read_val</a></span> <span class="id">v</span>) <span class="kwd">end</span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="read_ext">read_ext</a></span> {<span class="id">df</span>} (<span class="id">e</span> : <span class="id"><a href="Red.html#ext">ext</a></span> <span class="id">df</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#ext_term">ext_term</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#ext_app">ext_app</a></span> <span class="id">o</span> <span class="id">t2</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> <span class="kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t1</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#app">app</a></span> <span class="id">t1</span> <span class="id">t2</span>) | <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#ext_appnf">ext_appnf</a></span> <span class="id">v1</span> <span class="id">o</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> <span class="kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#app">app</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v1</span>) <span class="id">t2</span>) | <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#ext_switch">ext_switch</a></span> <span class="id">o</span> <span class="id">m</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> <span class="kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#switch">switch</a></span> <span class="id">t2</span> <span class="id">m</span>) | <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#ext_switchnf">ext_switchnf</a></span> <span class="id">v</span> <span class="id">m1</span> <span class="id">o</span> <span class="id">m2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">o</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#switch">switch</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>, <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m1</span> ++ <span class="id">m2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">p</span>, <span class="id">o</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#switch">switch</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>, <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m1</span> ++ (<span class="id">p</span>, <span class="id">t2</span>) :: <span class="id">m2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#extd_abs">extd_abs</a></span> <span class="id">o</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> <span class="kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#abs">abs</a></span> <span class="id">t</span>) | <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#extd_constr">extd_constr</a></span> <span class="id">tag</span> <span class="id">l1</span> <span class="id">o</span> <span class="id">l2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">o</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#constr">constr</a></span> <span class="id">tag</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> <span class="id">l1</span> ++ <span class="id">l2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">o</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#constr">constr</a></span> <span class="id">tag</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> <span class="id">l1</span> ++ <span class="id">t2</span> :: <span class="id">l2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="red_star_beta">red_star_beta</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span>, <span class="id"><a href="Red.html#red">red</a></span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span> -&gt; <span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>, <span class="id"><a href="RedProof.html#read_ext">read_ext</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t1</span> -&gt; <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t2</span> -&gt; <span class="id"><a href="Rewrite.html#star">star</a></span> <span class="id"><a href="Beta.html#beta">beta</a></span> <span class="id">t1</span> <span class="id">t2</span>.<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">enough</span> (<span class="kwd">forall</span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span>, <span class="id"><a href="Red.html#red">red</a></span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span> -&gt; <span class="id">o</span> &lt;&gt; <span class="id"><a href="Pretty.html#out_div">out_div</a></span> -&gt; <span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>, <span class="id"><a href="RedProof.html#read_ext">read_ext</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t1</span> -&gt; <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t2</span> -&gt; <span class="id"><a href="Rewrite.html#star">star</a></span> <span class="id"><a href="Beta.html#beta">beta</a></span> <span class="id">t1</span> <span class="id">t2</span>).<br/>
&nbsp;&nbsp;{ <span class="id">intros</span>; <span class="id">eapply</span> <span class="id">H</span>; <span class="id">try</span> <span class="id">eassumption</span>. <span class="id">destruct</span> <span class="id">o</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id">refine</span> (<span class="id"><a href="Inductive.html#preserved_with_inv3_rec">preserved_with_inv3_rec</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Red.html#red_ind3">red_ind3</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Red.html#red_not_div_preserved_down">red_not_div_preserved_down</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span> <span class="id">H</span> <span class="id">_</span> <span class="id">u1</span> <span class="id">u2</span> <span class="id">Hu1</span> <span class="id">Hu2</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>; <span class="id">unexistT</span>; <span class="id">subst</span>; <span class="id">unexistT</span>; <span class="id">subst</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">autoinjSome</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="RedProof.html#read_val_nf">read_val_nf</a></span>. <span class="id">simpl</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">o1</span>; [|<span class="id">tauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> *. <span class="id">eapply</span> <span class="id"><a href="Rewrite.html#star_compose">star_compose</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Rewrite.html#star_map_impl">star_map_impl</a></span> <span class="kwd">with</span> (<span class="id">RA</span> := <span class="id"><a href="Beta.html#beta">beta</a></span>); [<span class="id">intros</span>; <span class="id">constructor</span>; <span class="id">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H4</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">H6</span>; [<span class="id">reflexivity</span>|<span class="id">assumption</span>].<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">o1</span>; [|<span class="id">tauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> *. <span class="id">eapply</span> <span class="id"><a href="Rewrite.html#star_compose">star_compose</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Rewrite.html#star_map_impl">star_map_impl</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="STerm.html#app">app</a></span> <span class="id">t</span> <span class="id">t2</span>) (<span class="id">RA</span> := <span class="id"><a href="Beta.html#beta">beta</a></span>); [<span class="id">intros</span>; <span class="id">constructor</span>; <span class="id">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H3</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">H4</span>; [<span class="id">reflexivity</span>|<span class="id">assumption</span>].<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">o1</span>; [|<span class="id">tauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> *. <span class="id">eapply</span> <span class="id"><a href="Rewrite.html#star_compose">star_compose</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Rewrite.html#star_map_impl">star_map_impl</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="STerm.html#app">app</a></span> <span class="id">_</span> <span class="id">t</span>) (<span class="id">RA</span> := <span class="id"><a href="Beta.html#beta">beta</a></span>); [<span class="id">intros</span>; <span class="id">constructor</span>; <span class="id">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H3</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">H4</span>; [<span class="id">reflexivity</span>|<span class="id">assumption</span>].<br/>
&nbsp;&nbsp;- <span class="id">econstructor</span>; [<span class="id">apply</span> <span class="id"><a href="Beta.html#beta_redex">beta_redex</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H3</span>; [<span class="id">reflexivity</span>|<span class="id">assumption</span>].<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="RedProof.html#read_val_nf">read_val_nf</a></span>. <span class="id">simpl</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">H2</span>; [<span class="id">reflexivity</span>|<span class="id">assumption</span>].<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">o1</span>; [|<span class="id">tauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> *. <span class="id">eapply</span> <span class="id"><a href="Rewrite.html#star_compose">star_compose</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Rewrite.html#star_map_impl">star_map_impl</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="STerm.html#constr">constr</a></span> <span class="id">_</span> (<span class="id">_</span> ++ <span class="id">t</span> :: <span class="id">_</span>)) (<span class="id">RA</span> := <span class="id"><a href="Beta.html#beta">beta</a></span>); [<span class="id">intros</span>; <span class="id">constructor</span>; <span class="id">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H4</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">H6</span>; [<span class="id">reflexivity</span>|<span class="id">assumption</span>].<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">H2</span>; [|<span class="id">assumption</span>]. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">o1</span>; [|<span class="id">tauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> *. <span class="id">eapply</span> <span class="id"><a href="Rewrite.html#star_compose">star_compose</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Rewrite.html#star_map_impl">star_map_impl</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="STerm.html#switch">switch</a></span> <span class="id">t</span> <span class="id">_</span>) (<span class="id">RA</span> := <span class="id"><a href="Beta.html#beta">beta</a></span>); [<span class="id">intros</span>; <span class="id">constructor</span>; <span class="id">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H3</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">H4</span>; [<span class="id">reflexivity</span>|<span class="id">assumption</span>].<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="Misc.html#nth_error_decompose">nth_error_decompose</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> (<span class="id">m1</span> &amp; <span class="id">m2</span> &amp; -&gt; &amp; &lt;-).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; [|<span class="id">apply</span> <span class="id">H4</span>; [<span class="id">reflexivity</span>|<span class="id">assumption</span>]]. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">H3</span>; [<span class="id">reflexivity</span>|<span class="id">assumption</span>].<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="RedProof.html#read_val_nf">read_val_nf</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">o1</span>; [|<span class="id">tauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> *. <span class="id">eapply</span> <span class="id"><a href="Rewrite.html#star_compose">star_compose</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eapply</span> <span class="id"><a href="Rewrite.html#star_map_impl">star_map_impl</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="STerm.html#switch">switch</a></span> <span class="id">_</span> (<span class="id">_</span> ++ (<span class="id">_</span>, <span class="id">t</span>) :: <span class="id">_</span>)) (<span class="id">RA</span> := <span class="id"><a href="Beta.html#beta">beta</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">intros</span>; <span class="id">constructor</span>; <span class="id">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H3</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">H4</span>; [<span class="id">reflexivity</span>|<span class="id">assumption</span>].<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">H3</span>; [|<span class="id">assumption</span>]. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">e</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> <span class="id">solve</span> [<span class="id">destruct</span> <span class="id">o0</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">autoinjSome</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">congruence</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">o0</span> <span class="kwd">as</span> [<span class="id">o0</span>|]; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> <span class="id">o0</span> <span class="kwd">as</span> [<span class="id">p</span> <span class="id">o0</span>]; <span class="id">destruct</span> <span class="id">o0</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">autoinjSome</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> <span class="id">o0</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">autoinjSome</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">congruence</span>.<br/>
Qed.</details>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="read_ext_with_size">read_ext_with_size</a></span> {<span class="id">df</span>} (<span class="id">e</span> : <span class="id"><a href="Red.html#ext">ext</a></span> <span class="id">df</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#ext_term">ext_term</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">t</span>, 2 * <span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#ext_app">ext_app</a></span> <span class="id">o</span> <span class="id">t2</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> <span class="kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t1</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#app">app</a></span> <span class="id">t1</span> <span class="id">t2</span>, 2 * <span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t2</span> + 1) | <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#ext_appnf">ext_appnf</a></span> <span class="id">v1</span> <span class="id">o</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> <span class="kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#app">app</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v1</span>) <span class="id">t2</span>, 0) | <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#ext_switch">ext_switch</a></span> <span class="id">o</span> <span class="id">m</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#switch">switch</a></span> <span class="id">t2</span> <span class="id">m</span>, 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m</span>) + 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#ext_switchnf">ext_switchnf</a></span> <span class="id">v</span> <span class="id">m1</span> <span class="id">o</span> <span class="id">m2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">o</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">p</span>, <span class="id">o</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#switch">switch</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>, <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m1</span> ++ (<span class="id">p</span>, <span class="id">t2</span>) :: <span class="id">m2</span>), 1 + 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#switch">switch</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>, <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m1</span> ++ <span class="id">m2</span>), 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#extd_abs">extd_abs</a></span> <span class="id">o</span> =&gt; <span class="kwd">match</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> <span class="kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#abs">abs</a></span> <span class="id">t</span>, 0) | <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Red.html#extd_constr">extd_constr</a></span> <span class="id">tag</span> <span class="id">l1</span> <span class="id">o</span> <span class="id">l2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">o</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">o</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#constr">constr</a></span> <span class="id">tag</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> <span class="id">l1</span> ++ <span class="id">t2</span> :: <span class="id">l2</span>), 1 + 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t</span>)) <span class="id">l2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="STerm.html#constr">constr</a></span> <span class="id">tag</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> <span class="id">l1</span> ++ <span class="id">l2</span>), 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t</span>)) <span class="id">l2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="read_out_with_size">read_out_with_size</a></span> {<span class="id">df</span>} (<span class="id">o</span> : <span class="id"><a href="Pretty.html#out">out</a></span> (<span class="id"><a href="Red.html#val">val</a></span> <span class="id">df</span>)) := <span class="kwd">match</span> <span class="id">o</span> <span class="kwd">with</span> <span class="id"><a href="Pretty.html#out_div">out_div</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> | <span class="id"><a href="Pretty.html#out_ret">out_ret</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="RedProof.html#read_val">read_val</a></span> <span class="id">v</span>, 0) <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="fst_map">fst_map</a></span> {<span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : <span class="kwd">Type</span>} (<span class="id">f</span> : <span class="id">A</span> -&gt; <span class="id">B</span>) : (<span class="id">A</span> * <span class="id">C</span>) -&gt; (<span class="id">B</span> * <span class="id">C</span>) := <span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id">f</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">x</span>), <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">x</span>).<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="option_map_fst_id">option_map_fst_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>) (<span class="id">x</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id">A</span> * <span class="id">B</span>)), <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option_map">option_map</a></span> (<span class="id"><a href="RedProof.html#fst_map">fst_map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span>) <span class="id">x</span> = <span class="id">x</span>.<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x</span> <span class="kwd">as</span> [[<span class="id">x</span> <span class="id">y</span>]|]; <span class="id">simpl</span>; <span class="id">reflexivity</span>.<br/>
Qed.</details>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="red_div_beta_aux">red_div_beta_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span>, <span class="id"><a href="Red.html#cored">cored</a></span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span> -&gt; <span class="id"><a href="RedProof.html#read_ext_with_size">read_ext_with_size</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Costar.html#costarPTn">costarPTn</a></span> <span class="id"><a href="Beta.html#beta">beta</a></span> <span class="id">t</span> (<span class="id"><a href="RedProof.html#read_out_with_size">read_out_with_size</a></span> <span class="id">o</span>).<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">t</span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span> <span class="id">H</span> <span class="id">Ht</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="kwd">exists</span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Red.html#cored">cored</a></span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option_map">option_map</a></span> <span class="id">f</span> (<span class="id"><a href="RedProof.html#read_ext_with_size">read_ext_with_size</a></span> <span class="id">e</span>) = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">y</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option_map">option_map</a></span> <span class="id">f</span> (<span class="id"><a href="RedProof.html#read_out_with_size">read_out_with_size</a></span> <span class="id">o</span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Misc.html#respectful">respectful</a></span> (<span class="id"><a href="Costar.html#stepped">stepped</a></span> <span class="id"><a href="Beta.html#beta">beta</a></span>) <span class="id">f</span> /\ <span class="id"><a href="Misc.html#respectful">respectful</a></span> <span class="id"><a href="Costar.html#weaken">weaken</a></span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">df</span>. <span class="kwd">exists</span> <span class="id">e</span>. <span class="kwd">exists</span> <span class="id">o</span>. <span class="kwd">exists</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span>. <span class="id">splits</span> 5.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Misc.html#option_map_id">option_map_id</a></span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="Misc.html#option_map_id">option_map_id</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>. <span class="id">exact</span> <span class="id">Hxy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>. <span class="id">exact</span> <span class="id">Hxy</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">clear</span> <span class="id">t</span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span> <span class="id">H</span> <span class="id">Ht</span>. <span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> (<span class="id">df</span> &amp; <span class="id">e</span> &amp; <span class="id">o</span> &amp; <span class="id">f</span> &amp; <span class="id">H</span> &amp; <span class="id">Hx</span> &amp; -&gt; &amp; <span class="id">Hf</span>).<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span> <span class="kwd">as</span> [? ? ? <span class="id">NH</span>]; <span class="id">unexistT</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">NH</span>; <span class="id">subst</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">unexistT</span>; <span class="id">subst</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">autoinjSome</span>; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="RedProof.html#read_val_nf">read_val_nf</a></span> <span class="kwd">in</span> *; <span class="id">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">apply</span> <span class="id">Hf</span>. <span class="id">unfold</span> <span class="id"><a href="Costar.html#weaken">weaken</a></span>. <span class="id">split</span>; <span class="id">simpl</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">apply</span> <span class="id">Hf</span>. <span class="id">unfold</span> <span class="id"><a href="Costar.html#weaken">weaken</a></span>. <span class="id">split</span>; <span class="id">simpl</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;- <span class="id">right</span>; <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> (<span class="id"><a href="STerm.html#abs">abs</a></span> <span class="id">t</span>, 2 * <span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option_map">option_map</a></span> (<span class="kwd">fun</span> <span class="id">t1</span> =&gt; <span class="id">f</span> (<span class="id"><a href="STerm.html#abs">abs</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">t1</span>), <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">t1</span>)) (<span class="id"><a href="RedProof.html#read_out_with_size">read_out_with_size</a></span> <span class="id">o1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splits</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">Hf</span>. <span class="id">right</span>. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">simpl</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">t1</span> =&gt; <span class="id">f</span> (<span class="id"><a href="STerm.html#abs">abs</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">t1</span>), <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">t1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H4</span>|]. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>; <span class="id">apply</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">destruct</span> <span class="id">Hxy</span> <span class="kwd">as</span> [<span class="id">Hxy</span> | <span class="id">Hxy</span>]; [<span class="id">left</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">assumption</span>|<span class="id">right</span>; <span class="id">simpl</span>; <span class="id">split</span>; [<span class="id">f_equal</span>|]; <span class="id">tauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">unfold</span> <span class="id"><a href="Costar.html#weaken">weaken</a></span> <span class="kwd">in</span> *. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">f_equal</span>|]; <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">w</span> <span class="id">Hw</span>. <span class="id">destruct</span> <span class="id">o1</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hw</span>; [|<span class="id">discriminate</span>]. <span class="id">injection</span> <span class="id">Hw</span>; <span class="id">intros</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H6</span>|]. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">apply</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">apply</span> <span class="id">Hf</span>. <span class="id">apply</span> <span class="id"><a href="Costar.html#weaken_refl">weaken_refl</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> (<span class="id"><a href="STerm.html#app">app</a></span> <span class="id">t1</span> <span class="id">t2</span>, 2 * <span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t1</span> + 2 * <span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t2</span> + 1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option_map">option_map</a></span> (<span class="kwd">fun</span> <span class="id">t3</span> =&gt; <span class="id">f</span> (<span class="id"><a href="STerm.html#app">app</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">t3</span>) <span class="id">t2</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">t3</span> + 2 * <span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t2</span> + 1)) (<span class="id"><a href="RedProof.html#read_out_with_size">read_out_with_size</a></span> <span class="id">o1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splits</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">Hf</span>. <span class="id">right</span>. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">t3</span> =&gt; <span class="id">f</span> (<span class="id"><a href="STerm.html#app">app</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">t3</span>) <span class="id">t2</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">t3</span> + 2 * <span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t2</span> + 1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H3</span>|]. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>; <span class="id">apply</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">destruct</span> <span class="id">Hxy</span> <span class="kwd">as</span> [<span class="id">Hxy</span> | <span class="id">Hxy</span>]; [<span class="id">left</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">assumption</span>|<span class="id">right</span>; <span class="id">simpl</span>; <span class="id">split</span>; [<span class="id">f_equal</span>; <span class="id">tauto</span>|<span class="id">lia</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">unfold</span> <span class="id"><a href="Costar.html#weaken">weaken</a></span> <span class="kwd">in</span> *. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">f_equal</span>; <span class="id">tauto</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">v</span> <span class="id">Hv</span>. <span class="id">destruct</span> <span class="id">o1</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hv</span>; [|<span class="id">discriminate</span>]. <span class="id">injection</span> <span class="id">Hv</span>; <span class="id">intros</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H4</span>|]. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> (<span class="id"><a href="STerm.html#app">app</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span>) <span class="id">t2</span>, 2 * <span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option_map">option_map</a></span> (<span class="kwd">fun</span> <span class="id">t3</span> =&gt; <span class="id">f</span> (<span class="id"><a href="STerm.html#app">app</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">t3</span>), <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">t3</span>)) (<span class="id"><a href="RedProof.html#read_out_with_size">read_out_with_size</a></span> <span class="id">o1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splits</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">Hf</span>. <span class="id">right</span>. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">t3</span> =&gt; <span class="id">f</span> (<span class="id"><a href="STerm.html#app">app</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">t3</span>), <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">t3</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H3</span>|]. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>; <span class="id">apply</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">destruct</span> <span class="id">Hxy</span> <span class="kwd">as</span> [<span class="id">Hxy</span> | <span class="id">Hxy</span>]; [<span class="id">left</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">assumption</span>|<span class="id">right</span>; <span class="id">simpl</span>; <span class="id">split</span>; [<span class="id">f_equal</span>|]; <span class="id">tauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">unfold</span> <span class="id"><a href="Costar.html#weaken">weaken</a></span> <span class="kwd">in</span> *. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">f_equal</span>|]; <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">w</span> <span class="id">Hw</span>. <span class="id">destruct</span> <span class="id">o1</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hw</span>; [|<span class="id">discriminate</span>]. <span class="id">injection</span> <span class="id">Hw</span>; <span class="id">intros</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H4</span>|]. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> (<span class="id"><a href="STerm.html#subst1">subst1</a></span> <span class="id">t2</span> <span class="id">t1</span>, 2 * <span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="STerm.html#subst1">subst1</a></span> <span class="id">t2</span> <span class="id">t1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">apply</span> <span class="id">Hf</span>; <span class="id">left</span>; <span class="id">apply</span> <span class="id"><a href="Beta.html#beta_redex">beta_redex</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H3</span>|]. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">rewrite</span> <span class="id"><a href="RedProof.html#read_val_nf">read_val_nf</a></span>. <span class="id">apply</span> <span class="id"><a href="Costar.html#weaken_refl">weaken_refl</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">apply</span> <span class="id">Hf</span>. <span class="id">unfold</span> <span class="id"><a href="Costar.html#weaken">weaken</a></span>; <span class="id">split</span>; <span class="id">simpl</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> (<span class="id"><a href="STerm.html#constr">constr</a></span> <span class="id">tag</span> <span class="id">l</span>, 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t</span>)) <span class="id">l</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">apply</span> <span class="id">Hf</span>; <span class="id">right</span>; <span class="id">simpl</span>; <span class="id">split</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H2</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">apply</span> <span class="id">Hf</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>. <span class="id">unfold</span> <span class="id"><a href="Costar.html#weaken">weaken</a></span>; <span class="id">simpl</span>; <span class="id">split</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> (<span class="id"><a href="STerm.html#constr">constr</a></span> <span class="id">tag</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> <span class="id">l1</span> ++ <span class="id">t</span> :: <span class="id">l2</span>), 1 + 2 * <span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t</span> + 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t</span>)) <span class="id">l2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option_map">option_map</a></span> (<span class="kwd">fun</span> <span class="id">t3</span> =&gt; <span class="id">f</span> (<span class="id"><a href="STerm.html#constr">constr</a></span> <span class="id">tag</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> <span class="id">l1</span> ++ <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">t3</span> :: <span class="id">l2</span>), 1 + <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">t3</span> + 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t</span>)) <span class="id">l2</span>))) (<span class="id"><a href="RedProof.html#read_out_with_size">read_out_with_size</a></span> <span class="id">o1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splits</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">Hf</span>. <span class="id">right</span>. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">t3</span> =&gt; <span class="id">f</span> (<span class="id"><a href="STerm.html#constr">constr</a></span> <span class="id">tag</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> <span class="id">l1</span> ++ <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">t3</span> :: <span class="id">l2</span>), 1 + <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">t3</span> + 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t</span>)) <span class="id">l2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H4</span>|]. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>; <span class="id">apply</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">destruct</span> <span class="id">Hxy</span> <span class="kwd">as</span> [<span class="id">Hxy</span> | <span class="id">Hxy</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">left</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">assumption</span>|<span class="id">right</span>; <span class="id">simpl</span>; <span class="id">split</span>; [<span class="id">destruct</span> <span class="id">Hxy</span>; <span class="id">congruence</span>|<span class="id">lia</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">unfold</span> <span class="id"><a href="Costar.html#weaken">weaken</a></span> <span class="kwd">in</span> *. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">destruct</span> <span class="id">Hxy</span>; <span class="id">congruence</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">v</span> <span class="id">Hv</span>. <span class="id">destruct</span> <span class="id">o1</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hv</span>; [|<span class="id">discriminate</span>]. <span class="id">injection</span> <span class="id">Hv</span>; <span class="id">intros</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H6</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> (<span class="id"><a href="STerm.html#constr">constr</a></span> <span class="id">tag</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> <span class="id">l1</span> ++ <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> <span class="id">v</span> :: <span class="id">l2</span>), 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t</span>)) <span class="id">l2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">apply</span> <span class="id">Hf</span>; <span class="id">right</span>; <span class="id">simpl</span>; <span class="id">split</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H2</span>|]. <span class="id">split</span>; [<span class="id">simpl</span>; <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span>; <span class="id">reflexivity</span>|]. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> (<span class="id"><a href="STerm.html#switch">switch</a></span> <span class="id">t</span> <span class="id">m</span>, 1 + 2 * <span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t</span> + 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option_map">option_map</a></span> (<span class="kwd">fun</span> <span class="id">t3</span> =&gt; <span class="id">f</span> (<span class="id"><a href="STerm.html#switch">switch</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">t3</span>) <span class="id">m</span>, 1 + <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">t3</span> + 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m</span>))) (<span class="id"><a href="RedProof.html#read_out_with_size">read_out_with_size</a></span> <span class="id">o1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splits</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">Hf</span>. <span class="id">right</span>. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">t3</span> =&gt; <span class="id">f</span> (<span class="id"><a href="STerm.html#switch">switch</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">t3</span>) <span class="id">m</span>, 1 + <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">t3</span> + 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H3</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>; <span class="id">apply</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">destruct</span> <span class="id">Hxy</span> <span class="kwd">as</span> [<span class="id">Hxy</span> | <span class="id">Hxy</span>]; [<span class="id">left</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">assumption</span>|<span class="id">right</span>; <span class="id">simpl</span>; <span class="id">split</span>; [<span class="id">f_equal</span>; <span class="id">tauto</span>|<span class="id">lia</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">unfold</span> <span class="id"><a href="Costar.html#weaken">weaken</a></span> <span class="kwd">in</span> *. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">f_equal</span>; <span class="id">tauto</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">v</span> <span class="id">Hv</span>. <span class="id">destruct</span> <span class="id">o1</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hv</span>; [|<span class="id">discriminate</span>]. <span class="id">injection</span> <span class="id">Hv</span>; <span class="id">intros</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H4</span>|]. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">f_equal</span>; <span class="id">f_equal</span>; <span class="id">f_equal</span>; <span class="id">lia</span>|]. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> (<span class="id"><a href="STerm.html#subst">subst</a></span> (<span class="id"><a href="STerm.html#read_env">read_env</a></span> <span class="id">l</span>) <span class="id">t</span>, 2 * <span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="STerm.html#subst">subst</a></span> (<span class="id"><a href="STerm.html#read_env">read_env</a></span> <span class="id">l</span>) <span class="id">t</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Misc.html#nth_error_decompose">nth_error_decompose</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> (<span class="id">m1</span> &amp; <span class="id">m2</span> &amp; -&gt; &amp; &lt;-).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">apply</span> <span class="id">Hf</span>; <span class="id">left</span>; <span class="id">apply</span> <span class="id"><a href="Beta.html#beta_switch_redex">beta_switch_redex</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H4</span>|]. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> (<span class="id"><a href="STerm.html#switch">switch</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span>) <span class="id">m</span>, 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">apply</span> <span class="id">Hf</span>; <span class="id">right</span>; <span class="id">simpl</span>; <span class="id">split</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H3</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">apply</span> <span class="id">Hf</span>. <span class="id">unfold</span> <span class="id"><a href="Costar.html#weaken">weaken</a></span>; <span class="id">split</span>; <span class="id">simpl</span>; [<span class="id">rewrite</span> <span class="id"><a href="RedProof.html#read_val_nf">read_val_nf</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>; <span class="id">reflexivity</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> (<span class="id"><a href="STerm.html#switch">switch</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>, <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m1</span> ++ (<span class="id">p</span>, <span class="id">t</span>) :: <span class="id">m2</span>), 1 + 2 * <span class="id"><a href="STerm.html#size">size</a></span> <span class="id">t</span> + 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option_map">option_map</a></span> (<span class="kwd">fun</span> <span class="id">t3</span> =&gt; <span class="id">f</span> (<span class="id"><a href="STerm.html#switch">switch</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>, <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m1</span> ++ (<span class="id">p</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">t3</span>) :: <span class="id">m2</span>), 1 + <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">t3</span> + 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m2</span>))) (<span class="id"><a href="RedProof.html#read_out_with_size">read_out_with_size</a></span> <span class="id">o1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">splits</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id">Hf</span>. <span class="id">right</span>. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">t3</span> =&gt; <span class="id">f</span> (<span class="id"><a href="STerm.html#switch">switch</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>, <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m1</span> ++ (<span class="id">p</span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">t3</span>) :: <span class="id">m2</span>), 1 + <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">t3</span> + 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H3</span>|]. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">reflexivity</span>|]. <span class="id">split</span>; [<span class="id">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>; <span class="id">apply</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">destruct</span> <span class="id">Hxy</span> <span class="kwd">as</span> [<span class="id">Hxy</span> | <span class="id">Hxy</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">left</span>; <span class="id">simpl</span>; <span class="id">constructor</span>; <span class="id">assumption</span>|<span class="id">right</span>; <span class="id">simpl</span>; <span class="id">split</span>; [<span class="id">destruct</span> <span class="id">Hxy</span>; <span class="id">congruence</span>|<span class="id">lia</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">unfold</span> <span class="id"><a href="Costar.html#weaken">weaken</a></span> <span class="kwd">in</span> *. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">destruct</span> <span class="id">Hxy</span>; <span class="id">congruence</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">intros</span> <span class="id">w</span> <span class="id">Hw</span>. <span class="id">destruct</span> <span class="id">o1</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">Hw</span>; [|<span class="id">discriminate</span>]. <span class="id">injection</span> <span class="id">Hw</span>; <span class="id">intros</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H4</span>|]. <span class="id">simpl</span>. <span class="id">split</span>; [<span class="id">f_equal</span>; <span class="id">f_equal</span>; <span class="id">f_equal</span>; <span class="id">lia</span>|]. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> (<span class="id"><a href="STerm.html#switch">switch</a></span> (<span class="id"><a href="RedProof.html#read_nfval">read_nfval</a></span> <span class="id">v1</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">pt2</span>, <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m1</span> ++ (<span class="id">p</span>, <span class="id"><a href="RedProof.html#read_nfval_or_lam">read_nfval_or_lam</a></span> <span class="id">v2</span>) :: <span class="id">m2</span>), 2 * <span class="id"><a href="Misc.html#list_sum">list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">pt2</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="STerm.html#size">size</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">pt2</span>))) <span class="id">m2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">apply</span> <span class="id">Hf</span>; <span class="id">right</span>; <span class="id">simpl</span>; <span class="id">split</span>; [<span class="id">reflexivity</span>|<span class="id">lia</span>]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span>. <span class="id">eexists</span>. <span class="kwd">exists</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span> <span class="id">H3</span>|]. <span class="id">split</span>; [<span class="id">simpl</span>; <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, &lt;- <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span>; <span class="id">reflexivity</span>|]. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">exfalso</span>. <span class="id">destruct</span> <span class="id">e</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> <span class="id">solve</span> [<span class="id">destruct</span> <span class="id">o0</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">autoinjSome</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">congruence</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">o0</span> <span class="kwd">as</span> [<span class="id">o0</span>|]; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> <span class="id">o0</span> <span class="kwd">as</span> [<span class="id">p</span> <span class="id">o0</span>]; <span class="id">destruct</span> <span class="id">o0</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">autoinjSome</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> <span class="id">o0</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">autoinjSome</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; <span class="id">congruence</span>.<br/>
Qed.</details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="read_ext_with_size_read_ext">read_ext_with_size_read_ext</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">df</span> (<span class="id">e</span> : <span class="id"><a href="Red.html#ext">ext</a></span> <span class="id">df</span>), <span class="id"><a href="RedProof.html#read_ext">read_ext</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option_map">option_map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="RedProof.html#read_ext_with_size">read_ext_with_size</a></span> <span class="id">e</span>).<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">e</span>; <span class="id">simpl</span>; <span class="id">try</span> <span class="id">destruct</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span>; <span class="id">simpl</span>; <span class="id">try</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">o</span> <span class="kwd">as</span> [[<span class="id">p</span> <span class="id">o0</span>]|]; <span class="id">simpl</span> <span class="kwd">in</span> *; [|<span class="id">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span>; <span class="id">simpl</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">o</span> <span class="kwd">as</span> [<span class="id">o</span>|]; <span class="id">simpl</span> <span class="kwd">in</span> *; [|<span class="id">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="RedProof.html#read_out">read_out</a></span>; <span class="id">simpl</span>; <span class="id">reflexivity</span>.<br/>
Qed.</details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="read_out_with_size_read_out">read_out_with_size_read_out</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">df</span> (<span class="id">o</span> : <span class="id"><a href="Pretty.html#out">out</a></span> (<span class="id"><a href="Red.html#val">val</a></span> <span class="id">df</span>)), <span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option_map">option_map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="RedProof.html#read_out_with_size">read_out_with_size</a></span> <span class="id">o</span>).<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">o</span>; <span class="id">simpl</span>; <span class="id">reflexivity</span>.<br/>
Qed.</details>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="red_div_beta">red_div_beta</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span>, <span class="id"><a href="Red.html#cored">cored</a></span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span> -&gt; <span class="id"><a href="RedProof.html#read_ext">read_ext</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">t</span> -&gt; <span class="id"><a href="Costar.html#costar">costar</a></span> <span class="id"><a href="Beta.html#beta">beta</a></span> <span class="id">t</span> (<span class="id"><a href="RedProof.html#read_out">read_out</a></span> <span class="id">o</span>).<br/>
<details><summary>Proof.</summary>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">t</span> <span class="id">df</span> <span class="id">e</span> <span class="id">o</span> <span class="id">Hred</span> <span class="id">He</span>. <span class="id">apply</span> <span class="id"><a href="Costar.html#costarP_costar">costarP_costar</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="RedProof.html#read_ext_with_size_read_ext">read_ext_with_size_read_ext</a></span> <span class="kwd">in</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="RedProof.html#read_ext_with_size">read_ext_with_size</a></span> <span class="kwd">as</span> [<span class="id">t1</span>|] <span class="id">eqn</span>:<span class="id">Heqre</span>; <span class="id">simpl</span> <span class="kwd">in</span> *; [|<span class="id">congruence</span>].<br/>
&nbsp;&nbsp;<span class="id">injection</span> <span class="id">He</span> <span class="kwd">as</span> <span class="id">He</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="RedProof.html#read_out_with_size_read_out">read_out_with_size_read_out</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Costar.html#costarPTn_costarP">costarPTn_costarP</a></span>. <span class="id">eapply</span> <span class="id"><a href="RedProof.html#red_div_beta_aux">red_div_beta_aux</a></span>; <span class="id">eassumption</span>.<br/>
Qed.</details>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
